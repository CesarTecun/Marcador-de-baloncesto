<!-- ==============================================
     DISPLAY PÚBLICO - VISTA PRINCIPAL DEL MARCADOR
     ============================================== -->
<div class="container-fluid bg-dark text-light min-vh-100 p-0">
  <!-- Encabezado del marcador -->
  <header class="bg-black py-2 border-bottom border-secondary">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-12 text-center">
          <h1 class="h4 mb-0 text-warning fw-bold">MARCADOR DE BALONCESTO</h1>
          <div *ngIf="detail" class="badge mt-1" 
               [ngClass]="{
                 'bg-success': detail.game.status === 'IN_PROGRESS',
                 'bg-danger': detail.game.status === 'FINISHED' || detail.game.status === 'CANCELLED',
                 'bg-warning text-dark': detail.game.status === 'SUSPENDED',
                 'bg-primary': detail.game.status === 'SCHEDULED'
               }">
            {{ 
              detail.game.status === 'IN_PROGRESS' ? 'EN PROGRESO' :
              detail.game.status === 'FINISHED' ? 'FINALIZADO' :
              detail.game.status === 'CANCELLED' ? 'CANCELADO' :
              detail.game.status === 'SUSPENDED' ? 'SUSPENDIDO' :
              'PROGRAMADO'
            }}
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Indicador de carga -->
  <div *ngIf="!detail" class="d-flex justify-content-center align-items-center vh-100">
    <div class="text-center">
      <div class="spinner-border text-warning" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3 text-muted">Cargando datos del partido...</p>
    </div>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="detail as d" class="py-3">
    <div class="led-display">
      <!-- Fondo negro para el display LED -->
      <div class="led-container">
        <!-- Encabezado con estado del partido -->
        <div class="led-header">
          <div class="led-league">{{ d.game.leagueName || 'LIGA' }}</div>
          <div class="led-status" 
               [class.led-status-in-progress]="d.game.status === 'IN_PROGRESS'"
               [class.led-status-suspended]="d.game.status === 'SUSPENDED'"
               [class.led-status-finished]="d.game.status === 'FINISHED'">
            {{ getGameStatus(d.game.status) }}
          </div>
        </div>

        <!-- Cuarto y tiempo -->
        <div class="led-period">
          <div class="led-quarter">{{ getQuarterName(d.game.quarter) }}</div>
          <div class="led-time" [class.led-time-warning]="isTimeLow()">{{ formatGameTime() }}</div>
        </div>

        <!-- Equipos y puntuación -->
        <div class="led-teams">
          <!-- Equipo Local -->
          <div class="led-team led-team-home">
            <div class="led-team-name">{{ d.game.homeTeam }}</div>
            <div class="led-score">{{ d.game.homeScore || 0 }}</div>
            <div class="led-fouls" [class.led-fouls-bonus]="getTeamFouls('home') >= 5">
              FALTAS: {{ getTeamFouls('home') || 0 }}
              <span *ngIf="getTeamFouls('home') >= 5" class="led-bonus">BONUS</span>
            </div>
          </div>
          
          <!-- VS -->
          <div class="led-vs">VS</div>
          
          <!-- Equipo Visitante -->
          <div class="led-team led-team-away">
            <div class="led-team-name">{{ d.game.awayTeam }}</div>
            <div class="led-score">{{ d.game.awayScore || 0 }}</div>
            <div class="led-fouls" [class.led-fouls-bonus]="getTeamFouls('away') >= 5">
              FALTAS: {{ getTeamFouls('away') || 0 }}
              <span *ngIf="getTeamFouls('away') >= 5" class="led-bonus">BONUS</span>
            </div>
          </div>
        </div>

        <!-- Resultado final -->
        <div *ngIf="d.game.status === 'FINISHED'" class="led-verdict">
          <div class="verdict-text">
            {{ getWinner(d.game) }}
          </div>
          <div class="verdict-scores">
            {{ d.game.homeTeam }} {{ d.game.homeScore || 0 }} - {{ d.game.awayScore || 0 }} {{ d.game.awayTeam }}
          </div>
        </div>

        <!-- Pie de página del marcador -->
        <div class="led-footer">
          <div *ngIf="isGameSuspended" class="led-suspended">
            <i class="bi bi-pause-fill"></i> PARTIDO SUSPENDIDO
          </div>
        </div>
      </div>
    </div>
    
    <!-- Panel de control (solo visible para administradores) -->
    <div *ngIf="isAdmin && detail" class="admin-panel">
      <app-control-panel 
        [game]="detail.game"
        (changed)="refreshGame()"
        (resetRequested)="refreshGame()">
      </app-control-panel>
    </div>
  </div>

  <!-- Pie de página del sistema (oculto en producción) -->
  <footer class="fixed-bottom bg-black py-1 border-top border-secondary d-none">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center small text-muted">
          Sistema de Marcador de Baloncesto
        </div>
      </div>
    </div>
  </footer>
</div>
